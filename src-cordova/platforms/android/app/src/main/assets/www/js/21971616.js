(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["21971616"],{"0cdc":function(e,a,t){"use strict";t.d(a,"l",function(){return i}),t.d(a,"h",function(){return r}),t.d(a,"o",function(){return s}),t.d(a,"s",function(){return d}),t.d(a,"t",function(){return c}),t.d(a,"n",function(){return l}),t.d(a,"q",function(){return u}),t.d(a,"f",function(){return p}),t.d(a,"a",function(){return g}),t.d(a,"b",function(){return m}),t.d(a,"d",function(){return f}),t.d(a,"c",function(){return C}),t.d(a,"g",function(){return h}),t.d(a,"m",function(){return y}),t.d(a,"i",function(){return b}),t.d(a,"e",function(){return $}),t.d(a,"p",function(){return w}),t.d(a,"k",function(){return v}),t.d(a,"j",function(){return F}),t.d(a,"r",function(){return q});t("f751"),t("386d");var n=t("9dce"),o=t("e00b"),i=function(){var e={params:{}};n["a"].post("api/notifyManagerTwoDaysBeforLeaveStartAPI",{},e).then(function(e){o["a"].$emit("getCongetoValidateCountSuccess",e.data)}).catch(function(e){o["a"].$emit("getCongetoValidateCountFailed",e.response)})},r=function(e){var a=e.term,t={headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{search:a}};n["a"].post("api/listCollaborateurAPI",{},t).then(function(e){o["a"].$emit("getColabsSuccess",e.data)}).catch(function(e){o["a"].$emit("getColabsFailed",e.response)})},s=function(e){var a=e.id,t={headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{id:a}};n["a"].post("api/getNumberOfLeaveDaysAllowed",{},t).then(function(e){o["a"].$emit("getTempSoldeColabsSuccess",e.data)}).catch(function(e){o["a"].$emit("getTempSoldeColabsFailed",e.response)})},d=function(e){var a=e.dateStart,t=e.dateEnd,i=e.morning,r=e.afternoon,s={headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{dateDeDebut:a,dateDeFin:t,typeDebut:i,typeFin:r,jsonReturn:!0}};n["a"].post("api/soumettreDemande",{},s).then(function(e){o["a"].$emit("congeCreateSuccess",e.data)}).catch(function(e){o["a"].$emit("congeCreateFailed",e.response)})},c=function(e){var a=e.dateStart,t=e.dateEnd,i=e.morning,r=e.afternoon,s=e.id,d={headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{dateDeDebut:a,dateDeFin:t,typeDebut:i,typeFin:r,id:s,jsonReturn:!0}};n["a"].post("api/soumettreDemandeAnterieurAPI",{},d).then(function(e){o["a"].$emit("storeAnterieurSuccess",e.data)}).catch(function(e){o["a"].$emit("storeAnterieurFailed",e.response)})},l=function(){var e={params:{}};n["a"].post("api/congeNouvelleDemande",{},e).then(function(e){o["a"].$emit("getReliquatsSuccess",e.data)}).catch(function(e){o["a"].$emit("getReliquatsFailed",e.response)})},u=function(e){var a=e.page,t=e.maxRows,i={params:{page:a,maxRows:t}};n["a"].post("api/congeJoursFeriersAPI",{},i).then(function(e){o["a"].$emit("requestHolidaysSuccess",e.data)}).catch(function(e){o["a"].$emit("requestHolidaysFailed",e.response)})},p=function(e){var a=e.periodPaiment,t={params:{periodPaiment:a}};n["a"].post("api/exportDemandCongePayeeAsExcel",{},t).then(function(e){o["a"].$emit("exportPaiePeriodeDemandesSuccess",e.data)}).catch(function(e){o["a"].$emit("exportPaiePeriodeDemandesFailed",e.response)})},g=function(e){var a=e.props,t={params:{id:a.id,codeConge:a.codeConge,droit:a.droit}};n["a"].post("api/addOrUpdateCodeCongeAPI",{},t).then(function(e){o["a"].$emit("addCodeCongeSuccess",e.data)}).catch(function(e){o["a"].$emit("addCodeCongeFailed",e.response)})},m=function(e){var a=e.props,t=e.dateDebutJourFerier,i={params:{id:a.id,intitule:a.intitule,dateDebutJourFerier:t,nBJourFerier:a.nBJourFerier}};n["a"].post("api/addOrUpdateCongeJoursFeriersAPI",{},i).then(function(e){o["a"].$emit("addHolidaySuccess",e.data)}).catch(function(e){o["a"].$emit("addHolidayFailed",e.response)})},f=function(e){var a=e.id,t={params:{id:a}};n["a"].post("api/deleteCongeJoursFeriersAPI",{},t).then(function(e){o["a"].$emit("deleteHolidaySuccess",e.data)}).catch(function(e){o["a"].$emit("deleteHolidayFailed",e.response)})},C=function(e){var a=e.props,t={params:{id:a.id}};n["a"].post("api/deleteCodeCongeAPI",{},t).then(function(e){o["a"].$emit("deleteCodeCongeSuccess",e.data)}).catch(function(e){o["a"].$emit("deleteCodeCongeFailed",e.response)})},h=function(){var e={params:{}};n["a"].post("api/codeCongeAPI",{},e).then(function(e){o["a"].$emit("getCodeCongesSuccess",e.data)}).catch(function(e){o["a"].$emit("getCodeCongesFailed",e.response)})},y=function(e){var a=e.menuTable,t={params:{menuTableId:a}};n["a"].post("api/listMenuOptionsAPI",{},t).then(function(e){o["a"].$emit("getMenuTableSuccess",e.data)}).catch(function(e){o["a"].$emit("getMenuTableFailed",e.response)})},b=function(e){var a=e.code,t=e.maxRows,i=e.descending,r=e.column,s=e.search,d=e.dateStart,c=e.dateEnd,l=e.page,u={headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{code:a,maxRows:t,descending:i,column:r,search:s,dateStart:d,dateEnd:c,page:l}};n["a"].post("api/listDemandeCongeAPI",{},u).then(function(e){o["a"].$emit("getCongesSuccess",e.data)}).catch(function(e){o["a"].$emit("getCongesFailed",e.response)})},$=function(e){var a=e.code,t=e.maxRows,i=e.descending,r=e.column,s=e.search,d=e.dateStart,c=e.dateEnd,l=e.page,u={headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{filterType:a,maxRows:t,descending:i,column:r,search:s,dateStart:d,dateEnd:c,page:l}};n["a"].post("api/listDemandeCongeEnCoursAPI",{},u).then(function(e){o["a"].$emit("getCongesSuccess",e.data)}).catch(function(e){o["a"].$emit("getCongesFailed",e.response)})},w=function(e){var a=e.maxRows,t=e.descending,i=e.column,r=e.search,s=e.page,d={headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{maxRows:a,descending:t,column:i,search:r,page:s}};n["a"].post("api/blockedAndUnblockedUsersAPI",{},d).then(function(e){o["a"].$emit("getUserstoBlockUnblockSuccess",e.data)}).catch(function(e){o["a"].$emit("getUserstoBlockUnblockFailed",e.response)})},v=function(e){var a=e.datePaiment,t=e.code,i=e.maxRows,r=e.descending,s=e.column,d=e.search,c=e.dateStart,l=e.dateEnd,u=e.page,p={headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{code:t,maxRows:i,descending:r,column:s,search:d,dateStart:c,dateEnd:l,page:u,datePaiment:a}};n["a"].post("api/listDemandeCongeAPI",{},p).then(function(e){o["a"].$emit("getCongesSuccess",e.data)}).catch(function(e){o["a"].$emit("getCongesFailed",e.response)})},F=function(e){var a=e.reference,t={headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{id:a}};n["a"].post("api/historiqueDemandeCongeCollaborateurAPI",{},t).then(function(e){o["a"].$emit("getCongeHistorySuccess",e.data)}).catch(function(e){o["a"].$emit("getCongeHistoryFailed",e.response)})},q=function(e){var a=e.code,t=e.rows,i=e.comment,r=e.soldtoRegulize,s=e.datePaiment,d="";switch(a){case"congeValidated":Array.isArray(t)?(d="api/validerManagerToutesDemandeAPI",t=Object.assign({},t)):d="api/validerManagerDemandeAPI";break;case"congerejected":d="api/refuserManagerDemandeAPI";break;case"congeCanceled":d="api/annulerManagerDemandeAPI";break;case"payConge":d="api/payerCongeAPI",t=Array.isArray(t)?Object.assign({},t):Object.assign({},[t]);break;case"regulariserConge":Array.isArray(t)?(d="api/regulariserToutesDemandesAPI",t=Object.assign({},t)):d="api/regulariserCongeAPI";break;case"aRegulariserConge":d="api/aRegulariserCongeAPI";break;case"UnblockCollab":Array.isArray(t)?(d="api/UnblockUserFromDemandeCongeAPI",t=Object.assign({},t)):d="api/blockOrUnblockUserFromDemandeCongeAPI";break;case"blockCollab":d="api/blockOrUnblockUserFromDemandeCongeAPI";break;case"congeSansSuite":Array.isArray(t)?(d="api/updateEtatForAllDemandeEnCours",t=Object.assign({},t)):d="api/updateEtatDemandeEnCours";break}var c={headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{id:t,comment:i,sold_a_reg:r,datePaiment:s}};n["a"].post(d,{},c).then(function(e){o["a"].$emit("sendActionsSuccess",e.data)}).catch(function(e){o["a"].$emit("sendActionsFailed",e.response)})}},"4c7f":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"row congeListe"},[t("div",{staticClass:"congeListContainer"},[t("q-card",{staticClass:"col-md-10 congeCard"},[t("q-card-main",{staticClass:"congerCardContainer"},[t("q-table",{staticClass:"congeCodes",attrs:{data:e.tableData,columns:e.activeColumns,loading:e.loading,"hide-bottom":""},on:{request:e.requestCongesTypes},scopedSlots:e._u([{key:"body-cell-codeConge",fn:function(a){return t("q-td",{attrs:{props:a}},[null===a.row.id?t("q-input",{staticClass:"codeCongeInput",attrs:{pattern:"[0-9.]+",type:"text",placeholder:e.$t("demande.conge.codeConge")},model:{value:a.row.codeConge,callback:function(t){e.$set(a.row,"codeConge",t)},expression:"props.row.codeConge"}}):t("p",{staticClass:"codeCongeInputP"},[e._v(e._s(a.row.codeConge))])],1)}},{key:"body-cell-droit",fn:function(a){return t("q-td",{attrs:{props:a}},[t("q-input",{staticClass:"codeCongeValue",attrs:{type:"number",placeholder:e.$t("demande.conge.droit")},model:{value:a.row.droit,callback:function(t){e.$set(a.row,"droit",t)},expression:"props.row.droit"}})],1)}},{key:"body-cell-action",fn:function(a){return t("q-td",{attrs:{props:a}},[t("span",[t("q-btn",{staticClass:"saveBtn",attrs:{size:"xs",icon:"fa fa-save"},on:{click:function(t){e.saveCongeCode(a.row)}}}),t("q-tooltip",[e._v(e._s(e.$t("demande.conge.save")))])],1),t("span",[t("q-btn",{staticClass:"deleteBtn",attrs:{size:"xs",icon:"fa fa-trash-alt"},on:{click:function(t){e.deleteCodeConge(a.row)}}}),t("q-tooltip",[e._v(e._s(e.$t("demande.conge.delete")))])],1)])}}])}),t("q-btn",{staticClass:"addCodeHolidayAction",attrs:{label:e.$t("demande.conge.add")},on:{click:e.addNewCongeCode}})],1)],1),t("div",{staticClass:"col-md-10 HolidayCardContainer"},[t("q-card",{staticClass:"HolidayCard"},[t("div",{staticClass:"q-card-title holidaysTitle"},[e._v("\n          "+e._s(e.$t("demande.conge.holidayCard"))+"\n        ")]),t("q-card-main",{staticClass:"congerCardContainer holidayCardCintainer"},[t("q-table",{staticClass:"congeCodes",attrs:{data:e.holidays,columns:e.holidaysColumns,loading:e.loadingone,"row-key":"id",pagination:e.serverPagination,"rows-per-page-options":e.rowPerPage,"hide-header":""},on:{"update:pagination":function(a){e.serverPagination=a},request:e.requestHolidays},scopedSlots:e._u([{key:"body-cell-intitule",fn:function(a){return t("q-td",{attrs:{props:a}},[null===a.row.id?t("q-input",{staticClass:"holidayTitle",attrs:{type:"text",placeholder:e.$t("demande.conge.holidayTitle")},model:{value:a.row.intitule,callback:function(t){e.$set(a.row,"intitule",t)},expression:"props.row.intitule"}}):t("div",[t("p",{staticClass:"holidayTitleP"},[e._v(e._s(a.row.intitule))]),t("q-tooltip",[e._v(e._s(a.row.intitule))])],1)],1)}},{key:"body-cell-dateDebutJourFerier",fn:function(a){return t("q-td",{attrs:{props:a}},[t("q-datetime",{staticClass:"demande.conge.holidayDate",attrs:{format:"DD/MM/YYYY",type:"date"},model:{value:a.row.dateDebutJourFerier,callback:function(t){e.$set(a.row,"dateDebutJourFerier",t)},expression:"props.row.dateDebutJourFerier"}})],1)}},{key:"body-cell-nBJourFerier",fn:function(a){return t("q-td",{attrs:{props:a}},[t("q-input",{staticClass:"HolidayDaysNB",attrs:{type:"number",placeholder:e.$t("demande.conge.dayCount")},model:{value:a.row.nBJourFerier,callback:function(t){e.$set(a.row,"nBJourFerier",t)},expression:"props.row.nBJourFerier"}})],1)}},{key:"body-cell-action",fn:function(a){return t("q-td",{attrs:{props:a}},[t("span",[t("q-btn",{staticClass:"saveBtn",attrs:{size:"xs",icon:"fa fa-save"},on:{click:function(t){e.saveHoliday(a.row)}}}),t("q-tooltip",[e._v(e._s(e.$t("demande.conge.save")))])],1),t("span",[t("q-btn",{staticClass:"deleteBtn",attrs:{size:"xs",icon:"fa fa-trash-alt"},on:{click:function(t){e.deleteHoliday(a.row.id)}}}),t("q-tooltip",[e._v(e._s(e.$t("demande.conge.delete")))])],1)])}}])}),t("q-btn",{staticClass:"addCodeHolidayAction",attrs:{label:e.$t("demande.conge.add")},on:{click:e.addNewHoliday}})],1)],1)],1)],1)])},o=[];n._withStripped=!0;var i=t("2b0e"),r=t("0cdc"),s=t("e00b"),d=t("012a"),c=t("6458"),l=i["a"].extend({data(){return{tableData:[],activeColumns:[{name:"id",required:!0,label:this.$t("demande.conge.codeConge"),align:"center",field:"id",key:"id",style:"display: none",sortable:!1},{name:"codeConge",required:!0,label:this.$t("demande.conge.codeConge"),align:"center",field:"codeConge",key:"codeConge",style:"min-width: 150px",sortable:!1},{name:"droit",required:!0,label:this.$t("demande.conge.droit"),align:"center",field:"droit",key:"droit",style:"min-width: 80px",sortable:!1},{name:"action",required:!0,label:this.$t("demande.conge.actions"),align:"center",field:"action",key:"action",style:"min-width: 80px",sortable:!1}],holidaysColumns:[{name:"id",required:!0,align:"center",field:"id",key:"id",style:"display: none",sortable:!1},{name:"intitule",required:!0,field:"intitule",key:"intitule"},{name:"dateDebutJourFerier",required:!0,field:"dateDebutJourFerier",key:"dateDebutJourFerier"},{name:"nBJourFerier",required:!0,field:"nBJourFerier",key:"nBJourFerier"},{name:"action",required:!0,field:"action",key:"action"}],holidays:[],loading:!1,serverPagination:{rowsPerPage:5,page:1,rowsNumber:5},rowPerPage:[5,10,15,20,25,30],loadingone:!1}},mounted(){let e=this;e.$store.commit("Dashboard/setActiveMenu","1009"),s["a"].$on("requestHolidaysSuccess",function(a){e.loading=!1,e.holidays=a.tableData.data,e.serverPagination.rowsNumber=a.tableData.pagination.totalCount}),s["a"].$on("requestHolidaysFailed",function(a){e.loading=!1,void 0!==a&&401===a.status&&e.$store.commit("Auth/setExpiredError",!0)}),s["a"].$on("getCodeCongesSuccess",function(a){e.loading=!1,e.tableData=a}),s["a"].$on("addCodeCongeSuccess",function(a){e.loadingOne=!1,e.requestCongesTypes(),c["b"].create({icon:"fa fa-check",message:e.$t(a.title.label),color:"white"})}),s["a"].$on("addHolidaySuccess",function(a){e.loading=!1,e.requestHolidays({pagination:e.serverPagination}),c["b"].create({icon:"fa fa-check",message:e.$t(a.title.label),color:"white"})}),s["a"].$on("deleteHolidaySuccess",function(a){e.loading=!1,e.requestHolidays({pagination:e.serverPagination}),c["b"].create({icon:"fa fa-check",message:e.$t(a.title.label),color:"white"})}),s["a"].$on("deleteCodeCongeSuccess",function(a){e.loading=!1,e.requestCongesTypes(),c["b"].create({icon:"fa fa-check",message:e.$t(a.title.label),color:"white"})}),s["a"].$on("getCodeCongesFailed",function(a){e.loadingone=!1,void 0!==a&&401===a.status&&e.$store.commit("Auth/setExpiredError",!0)}),s["a"].$on("addCodeCongeFailed",function(a){e.loadingone=!1,void 0!==a&&(401===a.status?e.$store.commit("Auth/setExpiredError",!0):c["b"].create({type:"negative",icon:"fa fa-times",message:e.$t(a.data.title.label),color:"white"}))}),s["a"].$on("deleteCodeCongeFailed",function(a){e.loadingone=!1,void 0!==a&&(401===a.status?e.$store.commit("Auth/setExpiredError",!0):c["b"].create({type:"negative",icon:"fa fa-times",message:e.$t(a.data.title.label),color:"white"}))}),s["a"].$on("addHolidayFailed",function(a){e.loadingone=!1,void 0!==a&&(401===a.status?e.$store.commit("Auth/setExpiredError",!0):c["b"].create({type:"negative",icon:"fa fa-times",message:e.$t(a.data.title.label),color:"white"}))}),s["a"].$on("deleteHolidayFailed",function(a){e.loading=!1,void 0!==a&&(401===a.status?e.$store.commit("Auth/setExpiredError",!0):c["b"].create({type:"negative",icon:"fa fa-times",message:e.$t(a.data.title.label),color:"white"}))}),this.requestHolidays({pagination:e.serverPagination}),this.requestCongesTypes()},methods:{saveCongeCode(e){parseInt(e.droit)>0&&parseInt(e.droit)>0?(this.loading=!0,r["a"]({props:e})):c["b"].create({type:"negative",icon:"fa fa-times",message:this.$t("demande.conge.holidaysERRHaundle"),color:"white"})},deleteCodeConge(e){c["a"].create({title:this.$t("demande.conge.confirmation"),message:this.$t("demande.conge.youWantContinue"),ok:{label:this.$t("demande.conge.validate"),color:"primary"},cancel:{label:this.$t("demande.conge.close"),color:"white"}}).then(()=>{r["c"]({props:e})})},addNewHoliday(){this.holidays.push({id:null,intitule:"",dateDebutJourFerier:Object(d["a"])().format(),nBJourFerier:0})},addNewCongeCode(){this.tableData.push({id:null,codeConge:"",droit:0})},saveHoliday(e){parseInt(e.nBJourFerier)>0&&""!==e.intitule&&" "!==e.intitule?r["b"]({props:e,dateDebutJourFerier:Object(d["a"])(e.dateDebutJourFerier).format("DD-MM-YYYY")}):c["b"].create({type:"negative",icon:"fa fa-times",message:this.$t("demande.conge.holidaysERRHaundle"),color:"white"})},deleteHoliday(e){c["a"].create({title:this.$t("demande.conge.confirmation"),message:this.$t("demande.conge.youWantContinue"),ok:{label:this.$t("demande.conge.validate"),color:"primary"},cancel:{label:this.$t("demande.conge.close"),color:"white"}}).then(()=>{r["d"]({id:e})})},requestCongesTypes(){this.loading=!0,r["g"]()},requestHolidays({pagination:e}){this.serverPagination.page=e.page,this.serverPagination.rowsPerPage=e.rowsPerPage,this.loadingone=!0,r["q"]({page:parseInt(e.page-1),maxRows:e.rowsPerPage})}},beforeDestroy(){s["a"].$off("requestHolidaysSuccess"),s["a"].$off("getCodeCongesSuccess"),s["a"].$off("getCodeCongesFailed"),s["a"].$off("addCodeCongeSuccess"),s["a"].$off("addCodeCongeFailed"),s["a"].$off("addHolidaySuccess"),s["a"].$off("addHolidayFailed"),s["a"].$off("deleteHolidaySuccess"),s["a"].$off("deleteHolidayFailed"),s["a"].$off("deleteCodeCongeSuccess"),s["a"].$off("deleteCodeCongeFailed"),s["a"].$off("requestHolidaysFailed")}}),u=l,p=t("2877"),g=Object(p["a"])(u,n,o,!1,null,null,null);g.options.__file="holidays.vue";a["default"]=g.exports}}]);